<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>PSA Admin</title>
    <style>
      body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif; margin: 0; }
      .wrap { max-width: 720px; margin: 12vh auto; padding: 0 24px; }
      h1 { font-size: 44px; margin: 0 0 12px; }
      p { color: #445; margin: 0 0 24px; }
      form { display: flex; gap: 12px; max-width: 460px; }
      input[type=password] { flex: 1; padding: 12px 14px; font-size: 16px; border: 1px solid #ccd; border-radius: 8px; }
      button { padding: 12px 16px; font-size: 16px; border: 0; border-radius: 8px; background: #111827; color: #fff; cursor: pointer; }
      small { display:block; margin-top:10px; color:#a00; visibility:hidden }
    </style>
  </head>
  <body>
    <div class="wrap">
      <h1>PSA Admin</h1>
      <p>Enter password to continue.</p>

      <form id="login">
        <input id="pw" type="password" placeholder="Password" autocomplete="current-password" />
        <button type="submit">Enter</button>
        <small id="err">Incorrect password</small>
      </form>
    </div>

    <script>
      // NOTE: simple client-side gate, same spirit as your old static login.
      // For stronger auth we can wire a server route + cookie later.
      const PASSWORD = 'psaadmin';  // <-- change this
      const KEY = 'psa_admin_ok';
      const err = document.getElementById('err');

      // already logged in?
      if (sessionStorage.getItem(KEY) === '1') {
        location.replace('/admin'); // server will redirect to /admin/groups
      }

      document.getElementById('login').addEventListener('submit', (e) => {
        e.preventDefault();
        const pw = document.getElementById('pw').value || '';
        if (pw === PASSWORD) {
          sessionStorage.setItem(KEY, '1');
          location.replace('/admin'); // goes to /admin/groups
        } else {
          err.style.visibility = 'visible';
        }
      });
    </script>
  </body>
</html>
