<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PSA Admin</title>
  <link rel="stylesheet" href="/admin/admin.css">
<link rel="icon" href="data:,">
</head>
<body>

  <!-- LOGIN -->
  <div id="login" class="hide">
    <div class="psa-login">
      <h1>PSA Admin</h1>
      <div id="auth-note" class="muted">not signed in</div>
      <div class="login-row">
        <input id="pass" type="password" placeholder="Passcode" autocomplete="current-password" />
        <button id="btnLogin" class="btn primary">Sign in</button>
      </div>
      <div id="err" class="error"></div>
    </div>
  </div>

  <!-- APP SHELL -->
  <div id="shell" class="hide">
    <div class="admin-shell">
      <!-- Sidebar -->
      <aside class="admin-sidebar">
        <div class="sidebar-title">PSA Admin</div>
        <a id="nav-active" class="sidebar-item active" href="#">Active submissions</a>
        <a id="nav-reports" class="sidebar-item" href="#" title="Coming soon">Reports</a>
        <a id="nav-settings" class="sidebar-item" href="#" title="Coming soon">Settings</a>
        <div class="sidebar-spacer"></div>
        <a id="sidebar-signout" class="sidebar-item" href="#">Sign out</a>
      </aside>

      <!-- Main -->
      <main class="admin-main">
        <!-- Top bar -->
        <div class="topbar">
          <div class="brand">
            <span class="dot"></span>
            <strong>Active submissions</strong>
          </div>
          <div class="top-actions">
            <span id="auth-note-top" class="muted">passcode session</span>
            <button id="btnColumns" class="btn">Columns</button>
            <button id="top-signout" class="btn">Sign out</button>
          </div>
        </div>

        <!-- Views pills -->
        <div class="views-bar" id="views-bar">
          <!-- rendered by JS -->
        </div>

        <!-- Toolbar -->
        <div class="toolbar">
          <input id="q" type="search" placeholder="Search email or submission…" />
          <span class="count-pill"><span id="countPill">0</span></span>
          <div class="spacer"></div>
          <button id="btnRefresh" class="btn">Refresh</button>
        </div>

        <!-- Error line -->
        <div id="subsErr" class="error hide"></div>

        <!-- Table -->
        <div class="table-wrap">
          <div class="table-scroller">
            <table class="table" id="subsTable">
              <thead id="subsHead"></thead>
              <tbody id="subsTbody"></tbody>
            </table>
          </div>
          <div id="subsEmpty" class="empty hide">No submissions found.</div>
        </div>

        <!-- Pagination -->
        <div class="pagination">
          <span class="page-range" id="page-range">0–0 of 0</span>
          <button class="page-btn" id="prev-page">‹</button>
          <button class="page-btn" id="next-page">›</button>
        </div>
      </main>
    </div>
  </div>

  <!-- Columns Panel -->
  <div class="columns-panel-backdrop" id="columns-backdrop" aria-hidden="true">
    <div class="columns-panel">
      <div class="columns-head">
        <div style="font-weight:700">Columns</div>
        <button id="close-columns" class="btn">Close</button>
      </div>
      <div class="columns-body">
        <div id="columns-list"></div>
      </div>
      <div class="columns-foot">
        <button id="columns-cancel" class="btn">Cancel</button>
        <button id="columns-save" class="btn primary">Save</button>
      </div>
    </div>
  </div>

  <!-- New module entrypoint -->
  <script type="module" src="/admin/js/admin.app.js"></script>

<!-- Quiet the favicon 404 so it’s easier to spot real errors -->
<link rel="icon" href="data:,">
  <!-- (Optional) Keep legacy for instant rollback:
  <script src="/admin/admin.js"></script>
  -->
</body>
</html>
