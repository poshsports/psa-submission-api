/* ===== Base tokens & resets ===== */
:root { --fg:#111; --sub:#64748b; --bd:#eee; --ok:#16a34a; --err:#b91c1c; --muted:#94a3b8; }
* { box-sizing: border-box; }
body{margin:0;font:16px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Arial;color:var(--fg);background:#fafafa}
h1,h2,h3{margin:0}
.note{color:var(--sub)}
.hide{display:none}

/* Generic form bits used on misc pages */
label{display:block;margin:8px 0 6px}
input{padding:10px;border:1px solid var(--bd);border-radius:8px;background:#fff}
input[type="text"], input[placeholder], input:not([type]){width:100%}
button{padding:10px 14px;border:1px solid var(--bd);border-radius:8px;background:#fff;cursor:pointer}
button.ghost{background:#fff;border-color:#e5e7eb;color:#111}
button.danger{border-color:#fee2e2;color:#991b1b}
.err{color:var(--err);margin-top:8px}
.ok{color:var(--ok)}
.row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
.row.between{justify-content:space-between}
.controls{display:flex;gap:8px;align-items:center}
.pill{padding:4px 8px;border:1px solid #e5e7eb;border-radius:999px;font-size:12px;color:#64748b}

/* Generic table (non-admin pages) */
.table-wrap{width:100%;overflow-x:auto;border:1px solid #f1f5f9;border-radius:10px;background:#fff}
table{width:100%;border-collapse:collapse;table-layout:auto;min-width:1100px;background:#fff}
th,td{padding:10px 12px;border-bottom:1px solid #f1f5f9;white-space:nowrap;vertical-align:middle;background:#fff}
thead th{background:#fafafa;border-bottom:1px solid #e5e7eb;font-weight:600;position:sticky;top:0;z-index:1}
th.sortable{cursor:pointer;user-select:none}
th .caret{display:inline-block;margin-left:6px;font-size:11px;color:var(--muted);width:10px;text-align:center}
td.right{text-align:right}
code{background:#f6f8fa;padding:2px 6px;border-radius:6px}

/* Modal (columns) */
.modal{position:fixed;inset:0;background:rgba(0,0,0,.18);display:flex;align-items:flex-start;justify-content:center;padding:10vh 16px;z-index:2000}
.modal-panel{width:680px;max-width:100%;background:#fff;border:1px solid #e5e7eb;border-radius:12px;padding:16px;position:relative;z-index:2001}
.cols-list{display:grid;grid-template-columns:repeat(2,minmax(200px,1fr));gap:8px}
.cols-list label{display:flex;gap:8px;align-items:center;padding:6px 8px;border:1px solid #f1f5f9;border-radius:8px;background:#fafafa}
.modal.hide{display:none!important}

/* ===== PSA Admin shell (Shopify-like light theme) ===== */
:root{
  --app-bg:#f6f6f7; --surface:#fff; --surface-2:#fafbfc; --line:#e5e7eb;
  --text:#212b36; --muted:#637381; --accent:#008060; --accent-600:#007353;
  --accent-50:#e6f4ef; --row-hover:#f4f6f8; --focus:#2680eb;
  --r-sm:8px; --r-md:12px;
  --shadow-1:0 1px 2px rgba(16,24,40,.06),0 1px 3px rgba(16,24,40,.10);

  /* layout alignment + compact pager */
  --gutter-x:8px;                 /* tighter L/R padding for the bars */
  --pager-pad-y:6px; --pager-pad-x:10px; --pager-gap:8px;

  /* space reserved so the v-scrollbar never covers the last column */
  --scroll-gutter-right:16px;
}
.muted{color:var(--muted);font-size:12px}

/* Login card */
.psa-login{max-width:420px;margin:14vh auto;padding:24px;background:var(--surface);border:1px solid var(--line);border-radius:var(--r-md);color:var(--text);box-shadow:var(--shadow-1)}
.psa-login h1{margin:0 0 8px;font-size:22px}
.login-row{display:flex;gap:8px;margin-top:12px}
.login-row input{flex:1;padding:10px 12px;border-radius:10px;border:1px solid var(--line);background:#fff;color:var(--text)}
.btn{padding:8px 12px;border:1px solid var(--line);background:#fff;border-radius:10px;color:#var(--text);cursor:pointer}
.btn:hover{background:var(--row-hover)}
.btn.primary{background:var(--accent);border-color:var(--accent);color:#fff}
.btn.primary:hover{background:var(--accent-600)}
.error{color:#d82c0d;padding:8px 0}

/* Layout grid & scroll plumbing */
html,body{height:100%;overflow:hidden}          /* keep scrolling inside the table pane */
.admin-shell{
  height:100vh;display:grid;grid-template-columns:188px 1fr; /* narrower sidebar */
  overflow:hidden;background:var(--app-bg);color:var(--text)
}
.admin-sidebar{background:var(--surface);border-right:1px solid var(--line);padding:12px;display:flex;flex-direction:column;gap:6px}
.sidebar-title{font-weight:700;margin:6px 0 10px 6px;font-size:15px;color:var(--text)}
.sidebar-item{padding:8px 10px;border-radius:8px;color:var(--text);text-decoration:none}
.sidebar-item:hover{background:var(--row-hover)}
.sidebar-item.active{background:var(--accent-50);border-left:3px solid var(--accent);padding-left:7px;font-weight:600}
.sidebar-spacer{flex:1}
.admin-main{display:flex;flex-direction:column;overflow:hidden;min-height:0}

.topbar{
  height:56px;display:flex;align-items:center;justify-content:space-between;
  padding:0 var(--gutter-x);
  border-bottom:1px solid var(--line);background:var(--surface);
  position:sticky;top:0;z-index:10
}
.brand{display:flex;gap:10px;align-items:center;font-weight:700}
.brand .dot{width:10px;height:10px;border-radius:50%;background:var(--accent)}

.views-bar,.toolbar{
  display:flex;align-items:center;gap:8px;
  padding:10px var(--gutter-x);
  border-bottom:1px solid var(--line);background:var(--surface)
}
.view-pill{padding:6px 10px;border-radius:999px;border:1px solid var(--line);color:var(--text);background:#fff;cursor:pointer}
.view-pill:hover{background:var(--row-hover)}
.view-pill.active{background:var(--accent-50);border-color:var(--accent);font-weight:600}
.view-plus{padding:6px 10px;border-radius:999px;border:1px dashed var(--line);color:var(--muted);background:transparent}
.toolbar input[type="search"]{min-width:320px;padding:8px 10px;border:1px solid var(--line);border-radius:10px;background:#fff;color:var(--text)}
.toolbar input[type="search"]:focus{border-color:var(--focus);box-shadow:0 0 0 3px rgba(38,128,235,.15)}
.toolbar .spacer{flex:1}
.count-pill{padding:4px 8px;border-radius:999px;background:var(--surface-2);border:1px solid var(--line);font-size:12px;color:var(--muted)}
.toolbar select{height:36px;padding:6px 10px;border:1px solid var(--line);border-radius:10px;background:#fff;color:var(--text)}
.toolbar select:focus{border-color:var(--focus);box-shadow:0 0 0 3px rgba(38,128,235,.15)}
.toolbar .filters{display:flex;gap:8px;align-items:center}

/* Table container (fills height; both scrollbars inside) */
.table-wrap{
  flex:1;overflow:hidden;background:var(--surface);
  border:1px solid var(--line);border-radius:10px;box-shadow:var(--shadow-1);
  margin:6px 4px 0 4px;  /* tighter, minimal gap on left/right */
}

.table-scroller{
  height:100%;
  overflow:auto;
  overflow-y:scroll;                          /* always reserve v-scrollbar space */
  border-top:0;
  padding-right:var(--scroll-gutter-right);   /* space for v-scrollbar */
  scrollbar-gutter:stable both-edges;         /* keep layout stable */
}

/* Admin table styling */
.table{border-collapse:separate;border-spacing:0;min-width:1200px;width:100%;background:#fff}
.table th,.table td{border-bottom:1px solid var(--line)}
.table th{position:sticky;top:0;background:var(--surface-2);z-index:1;color:var(--muted)}
.table th .caret{margin-left:6px;opacity:.8;color:var(--muted)}
.table tr:hover td{background:var(--row-hover)}
.table td.right{text-align:right}
.table code{background:#eef2ff;border:1px solid var(--line);border-radius:999px;padding:3px 8px;font-weight:600;color:#1f2937}

/* EXTRA room on the last column so it never hides under the v-scrollbar */
.table thead th:last-child,
.table tbody td:last-child{
  padding-right: calc(12px + var(--scroll-gutter-right));
}

/* Empty */
.empty{padding:18px;color:var(--muted)}

/* Compact, left-aligned pagination */
.pagination{
  display:flex;align-items:center;justify-content:flex-start;gap:var(--pager-gap);
  padding:var(--pager-pad-y) var(--pager-pad-x);
  border-top:1px solid var(--line);background:var(--surface);
  font-size:14px;line-height:1.1;
}
.page-btn{padding:4px 8px;border:1px solid var(--line);border-radius:8px;background:#fff;color:var(--text)}
.page-btn:hover{background:var(--row-hover)}
.page-btn[disabled]{opacity:.5;cursor:not-allowed}
.page-range{color:var(--muted);margin-right:4px}

/* Columns drawer */
.columns-panel-backdrop{position:fixed;inset:0;background:rgba(16,24,40,.35);display:none;align-items:flex-start;justify-content:flex-end;z-index:50}
.columns-panel{width:360px;background:var(--surface);border-left:1px solid var(--line);height:100vh;display:flex;flex-direction:column;box-shadow:var(--shadow-1)}
.columns-head{padding:14px 16px;border-bottom:1px solid var(--line);display:flex;justify-content:space-between;align-items:center;background:var(--surface-2)}
.columns-body{padding:10px 12px;overflow:auto}
.columns-item{display:flex;align-items:center;gap:10px;padding:8px;border:1px solid var(--line);border-radius:10px;background:#fff;margin-bottom:8px}
.drag-handle{cursor:grab;user-select:none}
.columns-foot{padding:12px 16px;border-top:1px solid var(--line);display:flex;gap:8px;justify-content:flex-end;background:var(--surface-2)}

/* a11y */
a,button,[role="button"],input{outline-offset:2px}
a:focus-visible,button:focus-visible,.btn:focus-visible,input:focus-visible{outline:2px solid var(--focus)}

/* ===== Edit Columns mode (Shopify-like) ===== */
#subsHead.edit-cols th {
  background: var(--surface-2);
  box-shadow: inset 0 0 0 1px var(--line);
}
#subsHead .th-tools {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  margin-left: 8px;
}
#subsHead .th-eye {
  padding: 2px 6px;
  border-radius: 8px;
  border: 1px solid var(--line);
  background: #fff;
  cursor: pointer;
  font-size: 12px;
  line-height: 1;
}
#subsHead .th-eye:hover { background: var(--row-hover); }
